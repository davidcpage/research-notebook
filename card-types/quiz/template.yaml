name: quiz
description: Interactive quiz with multiple question types for self-assessment
schema:
  title:
    type: text
    required: true
  author:
    type: text
  topic:
    type: text
    description: Subject area for progress tracking
  suggestedTime:
    type: number
    description: Suggested time to complete the quiz in minutes (enables pacing timer)
  description:
    type: markdown
    description: Quiz description shown to students
  questions:
    type: array
    required: true
    description: Array of question objects
    items:
      type: object
      properties:
        type:
          type: text
          enum: [multiple_choice, checkbox, dropdown, numeric, short_answer, worked, scale, grid, date, time, datetime]
          required: true
        question:
          type: markdown
          required: true
        # multiple_choice fields
        options:
          type: array
          description: Answer options for multiple_choice
        correct:
          type: number
          description: Index of correct option (0-based) for single-answer questions
        allowMultiple:
          type: boolean
          description: If true, multiple options can be selected (checkbox vs radio)
          default: false
        correctMultiple:
          type: array
          description: Array of correct option indices for checkbox questions
        display:
          type: text
          enum: [radio, dropdown]
          description: Display style for single-answer multiple_choice
          default: radio
        # numeric fields
        answer:
          type: number
          description: Expected numeric answer
        tolerance:
          type: number
          description: Acceptable margin of error
          default: 0
        # scale fields (maps to Google Forms ScaleQuestion)
        low:
          type: number
          description: Lower bound of scale (typically 1)
          default: 1
        high:
          type: number
          description: Upper bound of scale (typically 5 or 10)
          default: 5
        lowLabel:
          type: text
          description: Label for low end (e.g., "Strongly Disagree")
        highLabel:
          type: text
          description: Label for high end (e.g., "Strongly Agree")
        # grid fields (maps to Google Forms Grid/RowQuestion)
        rows:
          type: array
          description: Row labels for grid questions
        columns:
          type: array
          description: Column labels for grid questions
        correctAnswers:
          type: array
          description: Array of [rowIndex, colIndex] pairs for correct grid answers
        # Scoring fields
        points:
          type: number
          description: Point value for this question (default 1)
          default: 1
        partialCredit:
          type: boolean
          description: Allow partial credit for applicable types (checkbox, grid). Default true.
          default: true
        # Feedback fields (maps to Google Forms whenRight/whenWrong)
        whenRight:
          type: markdown
          description: Feedback shown when answer is correct
        whenWrong:
          type: markdown
          description: Feedback shown when answer is wrong
        # Short answer auto-grading
        acceptedAnswers:
          type: array
          description: Acceptable text answers for short_answer type (case-insensitive match)
        exhaustive:
          type: boolean
          description: "If true, acceptedAnswers is the complete list — non-matches are marked incorrect (not pending_review)"
          default: false
        # Audio fields (for spelling tests, dictation, aural exams)
        audio:
          type: text
          description: Text to speak aloud (for spelling, dictation, listening comprehension)
        audioLang:
          type: text
          description: Language code for speech synthesis (e.g., 'en-GB', 'fr-FR', 'es-ES')
        # AI grading fields (not in Google Forms - our extension)
        modelAnswer:
          type: markdown
          description: Model answer for AI grading (short_answer, worked types)
        rubric:
          type: markdown
          description: Grading criteria for AI grading
  attempts:
    type: array
    description: Array of attempt records
    items:
      type: object
      properties:
        timestamp:
          type: datetime
        answers:
          type: array
          description: "Array of {questionIndex, answer, autoGrade: {status, score, maxScore}}"
        score:
          type: object
          properties:
            earned:
              type: number
              description: Total points earned
            possible:
              type: number
              description: Maximum possible points
            percentage:
              type: number
              description: Score as percentage (0-100)
            correct:
              type: number
              description: Count of fully correct answers
            total:
              type: number
              description: Total number of questions
            pending_review:
              type: number
              description: Count of questions awaiting manual review
        duration:
          type: number
          description: Time taken to complete the attempt in seconds
        review:
          type: markdown
          description: Claude's feedback on pending_review questions
  created:
    type: datetime
  modified:
    type: datetime
card:
  layout: quiz
  placeholder: "❓"
viewer:
  layout: quiz
editor:
  layout: default
  fields:
    - field: title
      label: Title
    - field: author
      label: Author
      width: half
    - field: topic
      label: Topic
      width: half
    - field: suggestedTime
      label: Suggested Time (minutes)
      type: number
      width: half
    - field: questions
      label: Questions
      type: questions
    - field: description
      label: Description (optional)
      type: text
      multiline: true
      rows: 2
style:
  variables:
    --template-border: "#c9d4e8"
    --template-bg: "#f0f4fa"
    --template-preview-bg: "#e8eef6"
    --template-title-text: "#2c3e50"
ui:
  button_label: null
  icon: "❓"
  sort_order: 10
extensions:
  ".quiz.json":
    parser: json
